---
title: 'flow: A leash to tame the elephant - HPCC'
author: "Sahil Seth"
output:
  beamer_presentation:
    colortheme: dolphin
    highlight: zenburn
    includes:
      in_header: /drives/Dropbox2/Dropbox/code/tex/beamerknitr.tex
    keep_tex: yes
    theme: Hannover
  ioslides_presentation:
    highlight: zenburn
    keep_md: yes
  slidy_presentation:
    highlight: zenburn
---
```{r beamer, echo=FALSE, message=FALSE, warning=FALSE}
library(knitr)
opts_chunk$set(comment="", 
  cache=TRUE, message=FALSE, warning = FALSE, echo = FALSE,
  tidy.opts=list(keep.blank.line=TRUE, width.cutoff=120),
  results='asis',
  #options(width=100), 
  #fig.align='center', fig.height=6, fig.width=10, 
	#fig.path='figure/beamer-',fig.show='hold',
	size='small')
```

```{r project_setup}
require(flow)
#setwd("~/projects/analysis_andrea.viale/out/Project_double13k_all/")
## load libs
#library(ggplot2);library(grid);library(reshape2);library(mypack)
#require(xtable)
## mutect output explained:
#http://gatkforums.broadinstitute.org/discussion/4231/what-is-the-output-of-mutect-and-how-should-i-interpret-it
```

## Overview
\setcounter{tocdepth}{1}
\tableofcontents{}

## Vision
\section{vision}
- Huge amount of data, too little time
- Complex workflows, with inter-dependencies
- Flexible, but robust system to submit and manage jobs

```{r}
render_latex() 
## split true only works with render_latex
```

## Example: a simple workflow
\section{simple}
- Let us say we have a 'Torque' cluster
- We have two jobs with 1 CPU each and second is dependent on the first
\begin{columns}
\column{.65\textwidth}
\begin{tiny}
```{r simple, echo=TRUE, fig.show='hide', size='tiny', split=TRUE, highlight=FALSE}
qobj <- queue(type="torque", verbose = FALSE)
jobj1 <- job(q_obj=qobj, cmd="sleep 2", name="job1")
jobj2 <- job(q_obj=qobj, cmd = "sleep 2", name="job2", 
             previous_job = "job1")
fobj <- flow(jobs = list(jobj1, jobj2))
plot_flow(fobj)
```
\end{tiny}
\column{.35\textwidth}
\includegraphics[page=1, type=pdf,ext=.pdf,read=.pdf, width=0.4\textwidth]{slides_files/figure-beamer/simple-1}
\end{columns}











